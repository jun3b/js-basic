<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <title>JS study</title>
  </head>
  <body>
    <script>

      // Chaining Promises
      // promise 를 여러개 사용하는 경우 (ex. 데이터가 암호화 되어있어서 데이터를 가져온 후 복호화 필요할 때...)
      const testPromise = new Promise( (resolve, reject) => {
        resolve(2)
      });

      testPromise
        .then( number => {
            console.log(number*2);
            return number*2;
            // then 에 return 값이 있어야 그 다음 then에서 resolve 된 값을 가지고 처리 가능
          })
        .then( otherNumber => console.log(otherNumber*2));

      // then 들 중에 error 가 발생했을 경우
      const timesTwo = (number) => number*2;
      testPromise
        .then(timesTwo)
        .then(timesTwo)
        .then(timesTwo)
        .then(timesTwo)
        .then(timesTwo)
        .then( () => {
          throw Error("Something is wrong");
        })
        .then(lastNumber => console.log("lastNumber : ", lastNumber))
        .catch( error => console.log(error));
      // error 발생시 프로세스가 끝까지 가지 못함
    </script>
  </body>
</html>